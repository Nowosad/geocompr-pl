```{r 08-ex-e0, message=FALSE}
library(sf)
library(terra)
```

E1. Wymień i opisz trzy typy formatów wektorowych, rastrowych i baz danych geograficznych.

```{asis 08-ex-e0-asis}
Vector formats: Shapefile (old format supported by many programs), GeoPackage (more recent format with better support of attribute data) and GeoJSON (common format for web mapping).

Raster formats: GeoTiff, Arc ASCII, ERDAS Imagine (IMG).

Database formats: PostGIS, SQLite, FileGDB.
```

E2. Wymień co najmniej dwie różnice międzyfunkcjami**sf**`read_sf()`i`st_read()`.

```{asis 08-ex-e2-asis}
`read_sf()` is simply a 'wrapper' around `st_read()`, meaning that it calls `st_read()` behind the scenes. The differences shown in the output of the `read_sf` are `quiet = TRUE`, `stringsAsFactors = FALSE`, and `as_tibble = TRUE`:

- `read_sf()` outputs are `quiet` by default, meaning less information printed to the console.
- `read_sf()` outputs are tibbles by default, meaning that they are data frames with some additional features.
- `read_sf()` does not convert strings to factors by default.

The differences can be seen by running the following commands `nc = st_read(system.file("shape/nc.shp", package="sf"))` and `nc = read_sf(system.file("shape/nc.shp", package="sf"))` from the function's help (`?st_read`).
```

```{r 08-ex-e2}
read_sf
nc = st_read(system.file("shape/nc.shp", package="sf"))
nc = read_sf(system.file("shape/nc.shp", package="sf"))
```

E3. Odczytajplik`cycle_hire_xy.csv`zpakietu**spData**jako obiekt przestrzenny (wskazówka: znajduje się on wfolderze`misc`).
Jaki jest typ geometrii załadowanego obiektu?

```{r 08-ex-e3}
c_h = read.csv(system.file("misc/cycle_hire_xy.csv", package = "spData")) |> 
  st_as_sf(coords = c("X", "Y"))
c_h
```

E4. Pobierz granice Niemiec za pomocą**rnaturalearth**i utwórz nowy obiekt o nazwie`germany_borders`.
Zapisz ten nowy obiekt w pliku w formacie GeoPackage.

```{r 08-ex-e4}
library(rnaturalearth)
germany_borders = ne_countries(country = "Germany", returnclass = "sf")
plot(germany_borders)
st_write(germany_borders, "germany_borders.gpkg")
```

E5. Pobierz globalną miesięczną minimalną temperaturę z rozdzielczością przestrzenną 5 minut, korzystając zpakietu**geodata**.
Wyodrębnij wartości z czerwca i zapisz je w pliku o nazwie`tmin_june.tif`(wskazówka: użyj`terra::subset()`).

```{r 08-ex-e5}
library(geodata)
gmmt = worldclim_global(var = "tmin", res = 5, path = tempdir())
names(gmmt)
plot(gmmt)

gmmt_june = terra::subset(gmmt, "wc2.1_5m_tmin_06")
plot(gmmt_june)
writeRaster(gmmt_june, "tmin_june.tif")
```

E6. Utwórz statyczną mapę granic Niemiec i zapisz ją w pliku PNG.

```{r 08-ex-e6}
png(filename = "germany.png", width = 350, height = 500)
plot(st_geometry(germany_borders), axes = TRUE, graticule = TRUE)
dev.off()
```

E7. Utwórz interaktywną mapę

,

korzystając z danych zpliku`cycle_hire_xy.csv`.
Wyeksportuj tę mapę do pliku o nazwie`cycle_hire.html`.

```{r 08-ex-e7, eval=FALSE}
library(mapview)
mapview_obj = mapview(c_h, zcol = "nbikes", legend = TRUE)
mapshot(mapview_obj, file = "cycle_hire.html")
```


