```{r 07-ex-e0, message=FALSE}
library(sf)
library(terra)
library(spData)
```

E1. Utwórz nowy obiekt o nazwie`nz_wgs`, przekształcającobiekt`nz`do układu współrzędnych WGS84.

- Utwórz obiekt klasy`crs`dla obu obiektów i użyj go do sprawdzenia ich układów współrzędnych.
- Odnosząc się do ramki ograniczającej każdego obiektu, jakie jednostki stosuje każdy układ współrzędnych?
- Usuń układ współrzędnych z`nz_wgs`i narysuj wynik: co jest nie tak z tą mapą Nowej Zelandii i dlaczego?

```{r 07-ex-e1}
st_crs(nz)
nz_wgs = st_transform(nz, "EPSG:4326")
nz_crs = st_crs(nz)
nz_wgs_crs = st_crs(nz_wgs)
nz_crs$epsg
nz_wgs_crs$epsg
st_bbox(nz)
st_bbox(nz_wgs)
nz_wgs_NULL_crs = st_set_crs(nz_wgs, NA)
nz_27700 = st_transform(nz_wgs, "EPSG:27700")
par(mfrow = c(1, 3))
plot(st_geometry(nz))
plot(st_geometry(nz_wgs))
plot(st_geometry(nz_wgs_NULL_crs))
# answer: it is fatter in the East-West direction
# because New Zealand is close to the South Pole and meridians converge there
plot(st_geometry(nz_27700))
par(mfrow = c(1, 1))
```

E2. Przekształć zbiórdanych`world`do przekątnej projekcji Mercatora (`"+proj=tmerc"`) i narysuj wynik.
Co się zmieniło i dlaczego?
Spróbuj przekształcić go z powrotem do WGS 84 i wykreśl nowy obiekt.
Dlaczego nowy obiekt różni się od oryginalnego?

```{r 07-ex-e2}
# see https://github.com/r-spatial/sf/issues/509
world_tmerc = st_transform(world, "+proj=tmerc")
plot(st_geometry(world_tmerc))
world_4326 = st_transform(world_tmerc, "EPSG:4326")
plot(st_geometry(world_4326))
```

E3. Przekształć ciągłą siatkę (`con_raster`) do NAD83 / UTM strefa 12N przy użyciu metody interpolacji najbliższego sąsiedztwa.
Co się zmieniło?
Jak wpływa to na wyniki?

```{r 07-ex-e3}
con_raster = rast(system.file("raster/srtm.tif", package = "spDataLarge"))
con_raster_utm12n = project(con_raster, "EPSG:32612", method = "near")
con_raster_utm12n

plot(con_raster)
plot(con_raster_utm12n)
```

E4. Przekształć raster kategoryczny (`cat_raster`) do WGS 84 przy użyciu metody interpolacji dwuliniowej.
Co się zmieniło?
Jak wpływa to na wyniki?

```{r 07-ex-e4}
cat_raster = rast(system.file("raster/nlcd.tif", package = "spDataLarge"))
cat_raster_wgs84 = project(cat_raster, "EPSG:4326", method = "bilinear")
cat_raster_wgs84

plot(cat_raster)
plot(cat_raster_wgs84)
```

<!--do zrobienia: jn-->

<!--popraw/zastąp/zmodyfikuj poniższe q-->

<!-- E5. Utwórz własny ciąg proj.  -->

<!-- Powinien on mieć rzut Lambert Azimuthal Equal Area (`laea`), elipsoidę WGS84, długość geograficzną środka rzutu 95 stopni zachodniej długości geograficznej, szerokość geograficzną środka rzutu 60 stopni północnej szerokości geograficznej, a jego jednostki powinny być podane w metrach. -->

<!-- Następnie wybierz podzbiór Kanady z obiektu `world` i przekształć go do nowej projekcji.  -->

<!-- Wykreśl i porównaj mapę przed i po transformacji. -->

<!-- ```{r 06-reproj-40} -->

<!-- new_p4s = "+proj=laea +ellps=WGS84 +lon_0=-95 +lat_0=60 +units=m" -->

<!-- canada = dplyr::filter(world, name_long == "Canada") -->

<!-- new_canada = st_transform(canada, new_p4s) -->

<!-- par(mfrow = c(1, 2)) -->

<!-- plot(st_geometry(canada), graticule = TRUE, axes = TRUE) -->

<!-- plot(st_geometry(new_canada), graticule = TRUE, axes = TRUE) -->

<!-- ``` -->


